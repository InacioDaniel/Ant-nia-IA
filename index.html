<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zenia-Antónia IA - by @inacio.u.daniel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        body { background: #010409; color: #e6edf3; font-family: 'Plus Jakarta Sans', sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        .chat-container { height: calc(100vh - 180px); overflow-y: auto; scroll-behavior: smooth; padding-bottom: 20px; }
        .glass { background: rgba(13, 17, 23, 0.8); backdrop-filter: blur(10px); border: 1px solid #30363d; }
        
        /* Mensagens */
        .msg { max-width: 85%; padding: 16px; border-radius: 18px; line-height: 1.6; position: relative; animation: fadeIn 0.3s ease; }
        .user-msg { background: #1f6feb; align-self: flex-end; border-bottom-right-radius: 2px; color: white; }
        .ai-msg { background: #161b22; align-self: flex-start; border-bottom-left-radius: 2px; border: 1px solid #30363d; }
        
        /* Quadro de Código */
        .code-wrapper { background: #0d1117; border-radius: 8px; border: 1px solid #444c56; margin: 12px 0; overflow: hidden; font-family: 'Fira Code', monospace; }
        .code-header { background: #161b22; padding: 8px 16px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #30363d; }
        .code-header span { font-size: 11px; color: #8b949e; text-transform: uppercase; }
        pre { padding: 16px; overflow-x: auto; font-size: 13px; color: #d2a8ff; }
        .copy-btn { background: #21262d; border: 1px solid #363b42; color: #c9d1d9; padding: 4px 8px; border-radius: 6px; font-size: 11px; cursor: pointer; transition: 0.2s; }
        .copy-btn:hover { background: #30363d; border-color: #8b949e; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .typing { display: flex; gap: 4px; padding: 10px; }
        .typing div { width: 6px; height: 6px; background: #58a6ff; border-radius: 50%; animation: bounce 1.4s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
    </style>
</head>
<body class="p-2 md:p-6">

    <div class="max-w-5xl mx-auto w-full h-full flex flex-col">
        <header class="flex justify-between items-center mb-4 px-2">
            <div>
                <h1 class="text-2xl font-black tracking-tighter text-white">ZENIA-ANTÓNIA</h1>
                <p class="text-[10px] text-blue-500 font-bold uppercase tracking-widest">By inácio.u.daniel | Nexus 2026</p>
            </div>
            <div id="status" class="flex items-center gap-2 text-[10px] bg-green-950 text-green-400 px-3 py-1 rounded-full border border-green-800">
                <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span> ONLINE
            </div>
        </header>

        <div id="chatBox" class="chat-container flex flex-col gap-6 px-2">
            <div class="msg ai-msg">
                <p class="text-blue-400 font-bold text-xs mb-1">ZENIA-ANTÓNIA</p>
                Sistemas otimizados por **inácio.u.daniel**. Estou pronta para gerar códigos e processar dados em alta velocidade.
            </div>
        </div>

        <div class="mt-auto p-2">
            <div class="glass rounded-2xl flex items-center p-2 border-[#30363d] focus-within:border-[#58a6ff] transition">
                <input type="text" id="userInput" placeholder="Peça um código ou tire uma dúvida..." autocomplete="off" class="flex-1 bg-transparent border-none outline-none text-sm p-2 text-white">
                <button onclick="sendMessage()" class="bg-[#238636] hover:bg-[#2ea043] text-white px-5 py-2 rounded-xl font-bold transition text-sm">
                    Enviar
                </button>
            </div>
        </div>
    </div>

    <script>
        const chatBox = document.getElementById('chatBox');
        const userInput = document.getElementById('userInput');

        // Função para limpar e formatar a resposta
        function formatAIResponse(text) {
            // Remove créditos externos e propagandas
            let clean = text.replace(/Support Pollinations\.AI.*/gs, '')
                            .replace(/Powered by Pollinations.*/gi, '')
                            .replace(/Antínia/gi, 'Zenia-Antónia')
                            .replace(/###/g, '') // Remove # de decoração
                            .trim();

            // Detectar blocos de código (Markdown ```)
            const codeBlockRegex = /```(\w*)\n([\s\S]*?)```/g;
            let match;
            while ((match = codeBlockRegex.exec(clean)) !== null) {
                const lang = match[1] || 'code';
                const code = match[2].replace(/</g, "&lt;").replace(/>/g, "&gt;");
                const codeHtml = `
                    <div class="code-wrapper">
                        <div class="code-header">
                            <span>${lang}</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                        </div>
                        <pre><code>${code}</code></pre>
                    </div>`;
                clean = clean.replace(match[0], codeHtml);
            }

            // Negritos e links
            clean = clean.replace(/\*\*(.*?)\*\*/g, '<b class="text-blue-400">$1</b>');
            return clean.replace(/\n/g, '<br>');
        }

        function copyCode(btn) {
            const code = btn.parentElement.nextElementSibling.innerText;
            navigator.clipboard.writeText(code);
            btn.innerText = 'Copiado!';
            setTimeout(() => btn.innerText = 'Copiar', 2000);
        }

        function addMessage(content, isUser = false) {
            const div = document.createElement('div');
            div.className = `msg ${isUser ? 'user-msg' : 'ai-msg'}`;
            div.innerHTML = isUser ? content : formatAIResponse(content);
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        async function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;

            addMessage(text, true);
            userInput.value = '';

            const thinking = document.createElement('div');
            thinking.className = 'msg ai-msg flex flex-col';
            thinking.innerHTML = '<div class="typing"><div></div><div></div><div></div></div>';
            chatBox.appendChild(thinking);

            try {
                // Modelo OpenAI é mais rápido para lógica e código
                const sys = `Seu nome: Zenia-Antónia. Criador: inácio.u.daniel. Ano: 2026. Responda apenas o solicitado. Se for código, use blocos markdown com \`\`\`.`;
                const url = `https://text.pollinations.ai/${encodeURIComponent(sys + "\nUsuário: " + text)}?model=openai&seed=${Math.random()}`;
                
                const response = await fetch(url);
                const result = await response.text();
                
                thinking.remove();
                addMessage(result);
            } catch (e) {
                thinking.innerHTML = "Erro na rede. Tente novamente.";
            }
        }

        userInput.addEventListener('keypress', (e) => e.key === 'Enter' && sendMessage());
    </script>
</body>
</html>
